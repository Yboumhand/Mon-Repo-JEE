<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context.xsd
           http://www.springframework.org/schema/mvc
           http://www.springframework.org/schema/mvc/spring-mvc.xsd">
    
    <!-- ================================================ -->
    <!-- CONFIGURATION SPRING MVC                          -->
    <!-- ================================================ -->
    
    <!-- 1. Activation des annotations MVC -->
    <mvc:annotation-driven/>
    
    <!-- 2. Scan du package controller pour détecter @Controller -->
    <context:component-scan base-package="controller"/>
    
    <!-- ================================================ -->
    <!-- RÉSOLUTION DES VUES JSP                          -->
    <!-- ================================================ -->
    
    <!-- 3. ViewResolver : Transforme le nom de vue en chemin JSP -->
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        
        <!-- Préfixe : dossier où se trouvent les JSP -->
        <property name="prefix" value="/pages/"/>
        
        <!-- Suffixe : extension des fichiers -->
        <property name="suffix" value=".jsp"/>
        
        <!-- Ordre de priorité (si plusieurs resolvers) -->
        <property name="order" value="1"/>
    </bean>
    
    <!-- ================================================ -->
    <!-- RESSOURCES STATIQUES (CSS, JS, Images)           -->
    <!-- ================================================ -->
    
    <!-- Permettre l'accès aux fichiers statiques -->
    <mvc:resources mapping="/resources/**" location="/resources/"/>
    <mvc:resources mapping="/css/**" location="/css/"/>
    <mvc:resources mapping="/js/**" location="/js/"/>
    
    <!-- ================================================ -->
    <!-- IMPORT DU CONTEXTE APPLICATION                   -->
    <!-- ================================================ -->
    
    <!-- Importer les beans DAO et Service -->
    <import resource="applicationContext.xml"/>
    
</beans>

<!--
EXPLICATION DES BALISES :

1. <mvc:annotation-driven/>
   - Active Spring MVC avec annotations
   - Permet @Controller, @RequestMapping, etc.

2. <context:component-scan base-package="controller"/>
   - Scanne le package "controller"
   - Détecte automatiquement les classes avec @Controller
   - Crée les beans automatiquement

3. InternalResourceViewResolver
   - Transforme "index" en "/pages/index.jsp"
   - prefix + "index" + suffix = /pages/index.jsp
   
   Exemple :
   Controller retourne "index"
   → ViewResolver transforme en "/pages/index.jsp"
   → Tomcat affiche index.jsp

4. <mvc:resources>
   - Définit les dossiers pour CSS, JS, images
   - Évite que Spring intercepte ces fichiers

5. <import resource="...">
   - Importe les beans de applicationContext.xml
   - Permet au Controller d'utiliser le Service

FLUX COMPLET :
User → /index → DispatcherServlet → ClientController.index()
→ return "index" → ViewResolver → /pages/index.jsp
-->